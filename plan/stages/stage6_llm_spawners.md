# Stage 6: LLM Team Spawner Implementation

## Goal
Implement LLM-controlled team strategy, agent generation, and emergent evolution systems to enable unprecedented creative strategies.

## Implementation Requirements
- Create team-level LLM integration for strategic decision making
- Implement dynamic agent generation system based on LLM specifications
- Design adaptive team strategy prompt templates
- Create emergent resource system with:
  - Resource combination mechanics (creating new resource types)
  - Resource transformation abilities
  - Territory-specific resource generation
- Implement team culture and specialization:
  - Team-wide trait development based on playstyle
  - Specialized technology trees unique to each team
  - Cultural bonuses that affect agent capabilities
- Add agent evolution system:
  - Performance-based attribute growth
  - Skill/ability emergence from experience
  - Agent specialization based on activities
- Create team communication hierarchy:
  - Commander-to-agent directives
  - Agent-to-commander reporting
  - Strategic priority setting
- Implement adaptive spawning system based on game conditions

## Expected Results
- Unique agents being generated by LLM spawner
- Team-level strategic decision making that adapts to opponent
- New resource types emerging during gameplay
- Team cultures developing distinct characteristics
- Evolved agents with specialized capabilities
- Varied agent types based on team strategy and game conditions
- Coherent team behavior with clear strategic intent
- Creative problem-solving approaches by teams

## Testing Methods
- **Console**: Logs of agent generation prompts/responses
- **Visual**: Verify diverse agent creation and strategic positioning
- **Evolution Tracking**: Monitor agent attribute changes over time
- **Resource System**: Test emergence of new resource combinations
- **Team Culture**: Verify distinct team traits development
- **JS Tests**: Unit tests for agent attribute allocation
- **Game Balance**: Test various scenarios for balanced gameplay
- **Strategy Analysis**: Review team strategic adaptation

## Completion Criteria
- Agent generation produces interesting, varied results
- Team strategy appears coherent and adapts to opponents
- New resource types emerge through agent actions
- Team cultures develop recognizable traits
- Agents evolve based on their experiences
- Overall gameplay is balanced and engaging
- Performance remains stable with full LLM integration
- Demo showcases teams with distinct strategies and evolved agents

## CLAUDE.md Template for This Stage

```markdown
# Current Implementation Stage: Stage 6 - LLM Team Spawners
Status: In Progress

## Todo List:
- [ ] Implement team-level LLM integration
- [ ] Create dynamic agent generation system
- [ ] Design adaptive team strategy prompt templates
- [ ] Implement emergent resource system
  - [ ] Add resource combination mechanics
  - [ ] Create resource transformation abilities
  - [ ] Develop territory-specific resource generation
- [ ] Create team culture and specialization system
  - [ ] Implement team-wide trait development
  - [ ] Add specialized technology trees
  - [ ] Create cultural bonuses for agents
- [ ] Develop agent evolution system
  - [ ] Add attribute growth mechanics
  - [ ] Implement skill/ability emergence
  - [ ] Create specialization based on experience
- [ ] Build team communication hierarchy
- [ ] Implement adaptive spawning based on conditions
- [ ] Create visualization for team traits and specializations

## Completed:
- [x] [Add completed tasks here]

## Testing Results:
- Agent diversity: [Pass/Fail]
- Team strategy adaptability: [Pass/Fail]
- Resource emergence: [Pass/Fail]
- Team culture development: [Pass/Fail]
- Agent evolution: [Pass/Fail]
- Strategic decision quality: [Pass/Fail]
- Game balance: [Pass/Fail]
- Performance stability: [Pass/Fail]

## Issues and Solutions:
- [Document any issues encountered]

## Next Stage Preparation:
- [ ] Identify areas for visual polish
- [ ] Plan performance optimization targets
- [ ] Design final balance adjustments
```

## Implementation Notes

### Team Culture and Evolution System

The team culture and evolution system should:

1. **Team Identity Formation**
   - Teams develop distinct "personalities" based on their decisions
   - Cultural traits emerge from repeated strategic choices
   - Visual indicators show team specialization (color shifts, visual effects)

2. **Technology Specialization**
   - Teams can discover/develop unique technologies through resource allocation
   - Specialized tech trees provide unique abilities to agents
   - Technology affects team-wide capabilities and constraints

3. **Agent Evolution Mechanics**
   - Successful agents gain attribute improvements
   - New abilities can emerge based on agent activities
   - Specialization occurs naturally through repeated actions
   - Veterans can influence newer agents (knowledge transfer)

4. **Emergent Resource System**
   - Basic resources can be combined to create new types
   - Specialized agents can transform resources
   - Territory type affects resource generation/transformation
   - New resource discoveries can unlock team capabilities

### Observability System Enhancements

This stage builds on the [Unified Observability System](/plan/unified_observability_system.md) implemented in Stage 5, adding:

1. **Team-Level Knowledge Integration**
   - Collective intelligence gathering and analysis
   - Strategic importance evaluation of observed information
   - Identification of information gaps requiring exploration

2. **Strategic Prediction**
   - Forecasting enemy behavior based on observed patterns
   - Resource and territory projection modeling
   - Risk assessment for different strategic options

3. **Communication Hierarchies**
   - Efficient information routing between agents and commanders
   - Priority-based message passing
   - Strategic directive distribution

These systems together will create genuinely unique gameplay experiences where teams develop in unprecedented ways based on LLM creativity and game conditions.
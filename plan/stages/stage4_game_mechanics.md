# Stage 4: Agent Interactions and Game Mechanics

## Goal
Implement core game mechanics with hardcoded agent behaviors.

## Implementation Requirements
- Implement resource collection mechanics
- Create territory control influence system
- Design and implement combat system between agents
- Program resource return to base functionality
- Create territory ownership visualization

## Expected Results
- Agents collecting resources when nearby
- Territory changing ownership based on agent presence
- Agents engaging in combat when meeting opponents
- Resources being deposited at bases
- Visual feedback for all interactions

## Testing Methods
- **Visual**: Verify all interaction animations and effects
- **Console**: Debug logs for interaction events
- **JS Tests**: Unit tests for combat calculations, resource management, territory influence
- **User Verification**: Test game feel and clarity of interactions

## Completion Criteria
- All core game mechanics function as expected
- Visual feedback clearly indicates game state
- Resource economy functions properly
- Territory control system behaves according to design

## CLAUDE.md Template for This Stage

```markdown
# Current Implementation Stage: Stage 4 - Game Mechanics
Status: In Progress

## Todo List:
- [ ] Implement resource collection system
- [ ] Create territory influence mechanics
- [ ] Design and implement combat system
- [ ] Program resource return to base functionality
- [ ] Develop territory ownership visualization
- [ ] Create visual feedback for all interactions

## Completed:
- [x] [Add completed tasks here]

## Testing Results:
- Resource collection: [Pass/Fail]
- Territory control: [Pass/Fail]
- Combat system: [Pass/Fail]
- Resource economy: [Pass/Fail]
- Visual feedback: [Pass/Fail]

## Issues and Solutions:
- [Document any issues encountered]

## Next Stage Preparation:
- [ ] Design LLM agent prompts
- [ ] Plan agent observation system
```
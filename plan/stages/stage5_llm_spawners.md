# Stage 5: LLM Team Spawners

## Goal
Implement LLM-controlled team strategy and agent generation while maintaining hardcoded agent behaviors.

## Implementation Requirements
- Create team-level LLM integration
- Implement agent generation system based on LLM specifications
- Design team strategy prompt templates
- Create resource allocation system for spawning
- Add agent specialization and role assignment
- Implement strategic agent deployment
- Create fallback behaviors for API failures

## Expected Results
- Unique agents being generated by LLM spawner
- Team-level strategic decision making
- Varied agent types based on strategy
- Coherent team behavior
- Creative and adaptive team strategies

## Testing Methods
- **Console**: Logs of spawner prompts/responses
- **Visual**: Verify diverse agent creation and strategic positioning
- **JS Tests**: Unit tests for agent attribute allocation
- **Game Balance**: Test various scenarios for balanced gameplay

## Completion Criteria
- Agent generation produces interesting, varied results
- Team strategy appears coherent and adapts to game state
- Overall gameplay is balanced and engaging
- Performance remains stable with LLM integration
- Spawners develop distinct "personalities" and approaches

## Technical Implementation

### New Components
1. **LLMSpawnerSystem.js**
   - Manages LLM team spawner integration
   - Handles API communication
   - Processes and validates responses

2. **TeamStrategy.js**
   - Stores current team strategies
   - Analyzes game state for strategy updates
   - Provides context for spawner decisions

3. **AgentSpecification.js**
   - Translates LLM descriptions to agent parameters
   - Validates and balances agent attributes
   - Manages agent role definitions

### Modified Components
1. **AgentSystem.js**
   - Update to work with LLM-generated agent specifications
   - Support for specialized agent roles
   - Maintain existing agent behavior logic

2. **BaseSystem.js**
   - Enhance to support strategic spawning decisions
   - Add resource management for spawning

### Key Mechanics
1. **Strategy Generation**
   - LLM receives game state information
   - Determines high-level team strategies
   - Adapts to changing game conditions

2. **Agent Creation**
   - LLM designs specialized agents with unique attributes
   - Translates natural language descriptions into game parameters
   - Creates diverse agent types with different strengths/weaknesses

3. **Resource Allocation**
   - LLM decides how to distribute team resources
   - Balances between quantity and quality of agents
   - Makes investment decisions for long-term advantage

4. **Agent Specialization**
   - Collectors, explorers, defenders, attackers, etc.
   - Each role has optimized attributes and behaviors
   - Team composition adapts to current strategy

5. **Strategic Deployment**
   - Spawn agents at tactically advantageous positions
   - Target specific resources or territories
   - Create formations or groups for coordinated actions

## CLAUDE.md Template for This Stage

```markdown
# Current Implementation Stage: Stage 5 - LLM Team Spawners
Status: In Progress

## Todo List:
- [ ] Set up LLM API integration
- [ ] Design team strategy prompt templates
- [ ] Implement team-level LLM integration
- [ ] Create agent generation system based on LLM specifications
- [ ] Develop resource allocation system for spawning
- [ ] Add agent specialization and role assignment
- [ ] Implement strategic agent deployment
- [ ] Create fallback behaviors for API failures

## Completed:
- [x] [Add completed tasks here]

## Testing Results:
- LLM response quality: [Pass/Fail]
- Agent diversity: [Pass/Fail]
- Team strategy coherence: [Pass/Fail]
- Resource allocation: [Pass/Fail]
- Game balance: [Pass/Fail]
- Performance stability: [Pass/Fail]

## Issues and Solutions:
- [Document any issues encountered]

## Next Stage Preparation:
- [ ] Identify areas for visual polish
- [ ] Plan performance optimization targets
```